:root{
  --primary:#6366f1;
  --primary-soft:#818cf8;
  --green:#22c55e;
  --red:#ef4444;

  --card:#ffffff;
  --text:#0f172a;
  --muted:#64748b;

  --border:rgba(0,0,0,.06);
}

/* ================= RESET ================= */
*{
  box-sizing:border-box;
  margin:0;
  padding:0;
  font-family:Poppins,system-ui;
}

/* ================= LIGHT MODE ================= */
body{
  background:linear-gradient(135deg,#eef2ff,#f8fafc);
  color:var(--text);
  transition:background .35s,color .35s;
}

/* ================= DARK MODE ================= */
body.dark{
  background:radial-gradient(circle at top,#0b1220 0%,#020617 60%);
  color:#e5e7eb;

  --card:#020617;
  --muted:#94a3b8;
  --border:rgba(148,163,184,.12);

  --primary:#818cf8;
  --primary-soft:#a5b4fc;
  --green:#4ade80;
  --red:#f87171;
}

/* ================= AI HEADER ================= */
.ai-header{
  margin:24px;
  padding:36px;
  border-radius:26px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:linear-gradient(135deg,#4f46e5,#6366f1,#818cf8);
  color:white;
}

body.dark .ai-header{
  background:linear-gradient(135deg,#1e293b,#312e81,#1e1b4b);
  box-shadow:0 30px 80px rgba(0,0,0,.7);
}

.ai-header-content h1{
  font-size:2.2rem;
  font-weight:800;
}

.subtitle{
  margin-top:6px;
  opacity:.9;
}

.ai-insight{
  margin-top:14px;
  padding:12px 16px;
  background:rgba(255,255,255,.14);
  border-radius:14px;
  backdrop-filter:blur(10px);
  font-size:.95rem;
}

body.dark .ai-insight{
  background:rgba(15,23,42,.65);
}

/* ================= HEADER RIGHT ================= */
.ai-header-right{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px;
}

.score-box{
  padding:18px 24px;
  border-radius:18px;
  background:rgba(255,255,255,.15);
  text-align:center;
  min-width:160px;
}

.score-value{
  font-size:2.2rem;
  font-weight:900;
}

.score-label{
  font-size:.85rem;
  opacity:.85;
}

.confidence-badge{
  padding:6px 14px;
  border-radius:999px;
  font-size:.8rem;
  font-weight:700;
}

.confidence-badge.high{background:#bbf7d0;color:#065f46;}
.confidence-badge.medium{background:#fde68a;color:#92400e;}
.confidence-badge.low{background:#fecaca;color:#7f1d1d;}

body.dark .confidence-badge.high{background:#064e3b;color:#a7f3d0;}
body.dark .confidence-badge.medium{background:#78350f;color:#fde68a;}
body.dark .confidence-badge.low{background:#7f1d1d;color:#fecaca;}

.dark-toggle{
  padding:8px 18px;
  border:none;
  border-radius:999px;
  background:rgba(255,255,255,.18);
  color:white;
  font-weight:600;
  cursor:pointer;
}

/* ================= TABS ================= */
.tabs{
  display:flex;
  justify-content:center;
  gap:18px;
  margin:30px 0;
}

.tab{
  padding:12px 30px;
  border:none;
  border-radius:999px;
  background:#e5e7eb;
  font-weight:600;
  cursor:pointer;
  transition:.25s;
}

.tab:hover{transform:translateY(-1px);}

.tab.active{
  background:linear-gradient(135deg,var(--primary),var(--primary-soft));
  color:white;
}

body.dark .tab{
  background:#1e293b;
  color:#e5e7eb;
}

/* ================= SECTIONS ================= */
.section{display:none}
.section.active{
  display:block;
  animation:fade .35s ease;
}

@keyframes fade{
  from{opacity:0;transform:translateY(14px)}
  to{opacity:1;transform:translateY(0)}
}

/* ================= METRIC CARDS ================= */
.card-row{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:22px;
  margin:0 24px 40px;
}

.card{
  background:var(--card);
  padding:24px;
  border-radius:18px;
  text-align:center;
  border:1px solid var(--border);
  box-shadow:0 18px 40px rgba(0,0,0,.08);
}

body.dark .card{
  box-shadow:0 22px 60px rgba(0,0,0,.7);
}

.metric{
  font-size:2rem;
  font-weight:800;
  margin-top:10px;
}

/* ================= CHART + THEORY ================= */
.chart-theory-box{
  background:var(--card);
  margin:0 24px 40px;
  padding:32px;
  border-radius:22px;
  display:grid;
  grid-template-columns:1.2fr 1fr;
  gap:32px;
  border:1px solid var(--border);
  box-shadow:0 25px 60px rgba(0,0,0,.12);
}

body.dark .chart-theory-box{
  box-shadow:0 35px 90px rgba(0,0,0,.75);
}

/* ================= CHART FIX ================= */
.chart-area{
  position:relative;
  height:320px;
}

.chart-area canvas{
  width:100%!important;
  height:100%!important;
  display:block;
}

/* ================= THEORY ================= */
.theory-area h3{
  margin-bottom:10px;
  font-size:1.3rem;
}

.theory-area p{
  color:var(--muted);
  line-height:1.7;
}

/* ================= TIP ================= */
.tip{
  background:#eef2ff;
  padding:12px;
  border-radius:12px;
  color:#4338ca;
  margin-top:10px;
}

body.dark .tip{
  background:#1e1b4b;
  color:#c7d2fe;
}

/* ================= DOTS ================= */
.green-dot,.red-dot{
  width:10px;
  height:10px;
  border-radius:50%;
  display:inline-block;
  margin-right:6px;
}

.green-dot{background:var(--green)}
.red-dot{background:var(--red)}

/* ================= GLOW PULSE ================= */
@keyframes glowPulse {
  0%   { box-shadow: 0 0 0 rgba(99,102,241,0); }
  50%  { box-shadow: 0 0 30px rgba(99,102,241,.75); }
  100% { box-shadow: 0 0 0 rgba(99,102,241,0); }
}

.glow{
  animation:glowPulse 2.6s ease-in-out infinite;
}

/* ================= RESPONSIVE ================= */
@media(max-width:900px){
  .card-row{grid-template-columns:1fr 1fr;}
  .chart-theory-box{grid-template-columns:1fr;}
  .ai-header{
    flex-direction:column;
    gap:24px;
    text-align:center;
  }
}

@media(max-width:600px){
  .card-row{grid-template-columns:1fr;}
}
